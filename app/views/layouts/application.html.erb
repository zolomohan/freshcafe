<!DOCTYPE html>
<html>
  <head>
    <title>Freshcafe</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <!-- Semantic UI -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css" integrity="sha512-8bHTC73gkZ7rZ7vpqUQThUDhqcNFyYi2xgDgPDHc+GXVGHXq+xPjynxIopALmOPqzo9JZj0k6OqqewdGO3EsrQ==" crossorigin="anonymous" />
    <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.js" integrity="sha512-dqw6X88iGgZlTsONxZK9ePmJEFrmHwpuMrsUChjAw1mRUhUITE5QU9pkcSox+ynfLhL15Sv2al5A0LVyDCmtUw==" crossorigin="anonymous"></script>
    
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
    
    <script src="https://kit.fontawesome.com/770ca4bfb4.js" crossorigin="anonymous"></script>

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;400;700&display=swap" rel="stylesheet">

    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>
  </head>

  <body>
    <div class="sidenav">
      <div>
        <div class="brand">
          <i class="fas fa-utensils"></i>
          <p>Freshcafe</p>
        </div>
        <hr>
        <%= link_to "All Items", root_path %>
        <h2>Categories</h2>
        <% Category.all.each do |category| %>
        <%= link_to category.name, category_path(category.id) %>
        <% end %>
        <div id="more-categories">
          <%= link_to "More", categories_path %>
          <i class="fas fa-chevron-right"></i>
        </div>
      </div>

      <div>
        <div id="auth-links">
          <% if user_signed_in? %>
          <%= link_to "Profile", "/users/#{current_user.id}" %>
          <%= link_to "Logout", logout_path, class: "nav-link", method: :delete %>
          <% else %>
          <%= link_to "Login", login_path %>
          <%= link_to "Signup", signup_path %>
          <% end %>
        </div>
      </div>
    </div>

    <div class="main">
      <div class="px-5">
        <% if notice %>
        <div class="ui message transition mt-4">
          <p><%= notice %></p>
        </div>
        <% end %>
        <%= yield %>
        <% if user_signed_in? %>
          <%= render 'layouts/cart_panel' %>
        <% end %>
      </div>
    </div>

   
  </body>
  <script>
    $('#toggle-panel').click(() => {
      let is_panel_minimized = $(".panel").css('height') === "70px";
      if(!is_panel_minimized) {
        $(".panel").css('height', '70px')
        $("#items").addClass('d-none')
        $("#panel-footer").addClass('d-none')
        $("#checkout-button").addClass('d-none')
        $('#toggle-panel').addClass('fa-chevron-up')
        $('#toggle-panel').removeClass('fa-chevron-down')

      } else {
        $(".panel").css('height', '700px')
        $("#items").removeClass('d-none')
        $("#panel-footer").removeClass('d-none')
        $("#checkout-button").removeClass('d-none')
        $('#toggle-panel').removeClass('fa-chevron-up')
        $('#toggle-panel').addClass('fa-chevron-down')
      }
    })
  </script>
</html>
